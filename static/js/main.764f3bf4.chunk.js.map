{"version":3,"sources":["../../src/button/index.js","../../src/icons/delete.js","../../src/filter/index.js","../../src/card/index.js","../../src/icons/cross.js","../../src/header/index.js","../../src/index.js","App.js","index.js"],"names":["Base","text","handleClick","className","cx","onClick","Button","type","DeleteIcon","width","height","viewBox","fill","xmlns","d","fields","label","options","value","conditions","criterias","Filter","filterState","setFilterState","rowIndex","removeFilter","field","condition","criteria","onChange","item","selectedOption","styles","conjunctions","Card","groupIndex","handleConjunction","state","handleAddFilter","handleFilterState","filters","conjunction","key","CrossIcon","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Header","query","QueryBuilder","handleFinish","handleBack","useState","setState","setQuery","useEffect","filterQuery","i","group","j","filter","buildQuery","App","alert","JSON","stringify","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.764f3bf4.chunk.js","sourcesContent":["import React from 'react'\nimport cx from 'classnames'\n\nconst Base = ({ text, handleClick, className }) => {\n  return (\n    <button\n      className={cx(\n        'px-1 py-1',\n        className,\n        'rounded border-gray-700 border text-white text-sm'\n      )}\n      onClick={() => handleClick()}\n    >\n      <span className='text-center'>{text}</span>\n    </button>\n  )\n}\nconst Button = ({ type, text, handleClick, className }) => {\n  if (type === 'primary') {\n    return (\n      <Base\n        text={text}\n        className={cx('bg-indigo-700', className)}\n        handleClick={handleClick}\n      />\n    )\n  }\n  return <Base text={text} className={className} handleClick={handleClick} />\n}\n\nexport default Button\n","import React from 'react'\n\nconst DeleteIcon = () => {\n  return (\n    <svg\n      width='14'\n      height='14'\n      viewBox='0 0 14 14'\n      fill='none'\n      xmlns='http://www.w3.org/2000/svg'\n    >\n      <path\n        d='M12.7843 0.25H1.21559C0.437466 0.25 0.399966 0.353125 0.446841 0.939062L1.3234 12.3109C1.3984 12.8875 1.45465 13.0047 2.14372 13.0047H11.8562C12.5453 13.0047 12.6015 12.8875 12.6765 12.3109L13.5531 0.939062C13.6 0.348437 13.5625 0.25 12.7843 0.25Z'\n        fill='#7E8083'\n      />\n    </svg>\n  )\n}\nexport default DeleteIcon\n","import React from 'react'\nimport Select from 'react-select'\nimport Button from '../button'\nimport DeleteIcon from '../icons/delete'\n\nconst fields = [\n  {\n    label: 'Prediction',\n    options: [\n      { label: 'Theme', value: 'theme' },\n      { label: 'Subtheme', value: 'subtheme' },\n      { label: 'Reason', value: 'reason' },\n      { label: 'Language', value: 'language' }\n    ]\n  },\n  {\n    label: 'Common',\n    options: [\n      { label: 'CustomerId', value: 'customer_id' },\n      { label: 'Group 2, option 2', value: 'value_2' }\n    ]\n  }\n]\n\nconst conditions = [\n  {\n    label: 'Equals',\n    value: '=='\n  },\n  {\n    label: 'Does not equals',\n    value: '!='\n  },\n  {\n    label: 'Like',\n    value: '%'\n  }\n]\nconst criterias = [\n  {\n    label: 'Offers',\n    value: 'offers'\n  },\n  {\n    label: 'Promotions',\n    value: 'promotions'\n  }\n]\n\nconst Filter = ({ filterState, setFilterState, rowIndex, removeFilter }) => {\n  const { field, condition, criteria } = filterState\n  return (\n    <div className='flex gap-4 mt-10 mb-5'>\n      <Select\n        value={field}\n        onChange={(selectedOption) =>\n          setFilterState({ item: 'field', selectedOption, rowIndex })\n        }\n        options={fields}\n        styles={{}}\n        className='flex-grow w-full text-sm'\n      />\n\n      <Select\n        value={condition}\n        onChange={(selectedOption) =>\n          setFilterState({ item: 'condition', selectedOption, rowIndex })\n        }\n        options={conditions}\n        styles={{}}\n        className='flex-grow w-full text-sm'\n      />\n\n      <Select\n        value={criteria}\n        onChange={(selectedOption) =>\n          setFilterState({ item: 'criteria', selectedOption, rowIndex })\n        }\n        options={criterias}\n        styles={{}}\n        className='flex-grow w-full text-sm'\n      />\n      <Button\n        text={<DeleteIcon />}\n        className='ml-2 px-2'\n        handleClick={() => removeFilter(rowIndex)}\n      />\n    </div>\n  )\n}\nexport default Filter\n","import React from 'react'\nimport cx from 'classnames'\nimport Button from '../button'\nimport Filter from '../filter'\n\nexport const conjunctions = ['&&', '||']\n\nconst Card = ({\n  groupIndex,\n  handleConjunction,\n  state,\n  handleAddFilter,\n  handleFilterState,\n  removeFilter,\n  join,\n  className\n}) => {\n  const renderFilters = () => {\n    return filters.map((item, rowIndex) => {\n      return (\n        <Filter\n          key={rowIndex}\n          filterState={item}\n          setFilterState={(filterObj) =>\n            handleFilterState({ ...filterObj, groupIndex })\n          }\n          rowIndex={rowIndex}\n          removeFilter={() => removeFilter(rowIndex, groupIndex)}\n        />\n      )\n    })\n  }\n  const { filters, conjunction } = state\n  return (\n    <div className={cx('w-full bg-gray-800 rounded-sm p-5', className)}>\n      <div>\n        <Button\n          type={conjunction === conjunctions[0] ? 'primary' : ''}\n          text='AND'\n          handleClick={() => handleConjunction(conjunctions[0], groupIndex)}\n          className='rounded-r-none px-2'\n        />\n        <Button\n          type={conjunction === conjunctions[1] ? 'primary' : ''}\n          text='OR'\n          handleClick={() => handleConjunction(conjunctions[1], groupIndex)}\n          className='rounded-l-none px-2'\n        />\n      </div>\n      {renderFilters()}\n      <Button\n        type='primary'\n        text='+ Add filter'\n        handleClick={() => handleAddFilter(groupIndex)}\n        className='px-2'\n      />\n    </div>\n  )\n}\nexport default Card\n","import React from 'react'\n\nconst CrossIcon = ({ className }) => {\n  return (\n    <svg\n      width='14'\n      height='14'\n      viewBox='0 0 14 14'\n      fill='none'\n      xmlns='http://www.w3.org/2000/svg'\n      className={className}\n    >\n      <path\n        d='M1 13L13 1M1 1L13 13'\n        stroke='#C7D2FE'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n    </svg>\n  )\n}\nexport default CrossIcon\n","import React from 'react'\nimport CrossIcon from '../icons/cross'\nimport Button from '../button'\nconst Header = ({ query }) => {\n  return (\n    <div className='bg-indigo-500 w-full p-6'>\n      <div className='flex'>\n        <span className='text-white flex-grow'>Build your query</span>\n        <Button\n          text={<CrossIcon className='font-semibold' />}\n          className='bg-indigo-700 px-1'\n        />\n      </div>\n      <div className='bg-indigo-700 p-5 mt-4 rounded'>\n        <span className='text-white'>\n          <b className='text-base mr-1'>Query:</b>\n          {/* {query.includes('undefined') ? null : query} */}\n          {query}\n        </span>\n      </div>\n    </div>\n  )\n}\nexport default Header\n","import React, { useState, useEffect } from 'react'\n// import cx from 'classnames'\nimport 'tailwindcss/tailwind.css'\nimport Button from './button'\nimport Card, { conjunctions } from './card'\nimport Header from './header'\n\nexport const QueryBuilder = ({ handleFinish, handleBack }) => {\n  const [state, setState] = useState([\n    {\n      filters: [{ field: null, condition: null, criteria: null }],\n      conjunction: conjunctions[0]\n    }\n  ])\n\n  const handleAddGroup = () => {\n    setState([\n      ...state,\n      {\n        filters: [{ field: null, condition: null, criteria: null }],\n        conjunction: conjunctions[0]\n      }\n    ])\n  }\n  const handleConjunction = (conjunction, groupIndex) => {\n    state[groupIndex].conjunction = conjunction\n    setState([...state])\n  }\n  const handleFilterState = ({\n    item,\n    selectedOption,\n    rowIndex,\n    groupIndex\n  }) => {\n    state[groupIndex].filters[rowIndex][item] = selectedOption\n    setState([...state])\n  }\n  const handleAddFilter = (groupIndex) => {\n    state[groupIndex].filters.push({\n      field: null,\n      condition: null,\n      criteria: null\n    })\n    setState([...state])\n  }\n  const removeFilter = (rowIndex, groupIndex) => {\n    if (state[groupIndex].filters.length === 1) return\n    state[groupIndex].filters.splice(rowIndex, 1)\n    setState([...state])\n  }\n\n  const render = () => {\n    return state.map((item, idx) => {\n      return (\n        <Card\n          key={idx}\n          state={state[idx]}\n          className='mb-5'\n          groupIndex={idx}\n          handleConjunction={handleConjunction}\n          handleAddFilter={handleAddFilter}\n          removeFilter={removeFilter}\n          handleFilterState={handleFilterState}\n        />\n      )\n    })\n  }\n  const [query, setQuery] = useState('')\n  const buildQuery = () => {\n    // eslint-disable-next-line no-unused-vars\n    let filterQuery = ''\n    for (let i = 0; i < state.length; i++) {\n      const group = state[i]\n      if (i > 0 && filterQuery)\n        filterQuery = `${filterQuery} ${group.conjunction} `\n      for (let j = 0; j < group.filters.length; j++) {\n        const filter = group.filters[j]\n        if (j > 0 && filterQuery) {\n          filterQuery = `${filterQuery} ${group.conjunction} `\n        }\n        // TO handle the undefined  states, build it step by step\n        if (filter.field) {\n          filterQuery += `\"field.${filter.field?.value} `\n        }\n        if (filter.condition) {\n          filterQuery += `${filter.condition?.value} `\n        }\n        if (filter.criteria) {\n          filterQuery += `\\\\\"${filter.criteria?.value}\"\\\\\"`\n        }\n      }\n    }\n    setQuery(filterQuery)\n  }\n  useEffect(() => {\n    buildQuery()\n  }, [state])\n\n  return (\n    <div className='w-full bg-gray-900 pb-20'>\n      <Header query={query} />\n      <div className='container mt-52 mx-auto w-full'>\n        {render()}\n        <Button\n          text='+ Add New gropup filter'\n          type='primary'\n          handleClick={handleAddGroup}\n          className='px-2'\n        />\n      </div>\n      <div className='container mt-32 mx-auto w-full flex justify-between'>\n        <Button text='Back' handleClick={handleBack} className='px-2' />\n        <Button\n          text='Finish'\n          type='primary'\n          handleClick={() => handleFinish(query)}\n          className='px-2'\n        />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { QueryBuilder } from 'query-builder'\nimport 'query-builder/dist/index.css'\n\nconst App = () => {\n  return (\n    <QueryBuilder\n      handleBack={() => alert('fired')}\n      handleFinish={(query) => alert(JSON.stringify(query))}\n    />\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}